<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Base10 ↔ Base62 Converter</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            max-width: 720px;
            margin: 40px auto;
            padding: 0 16px;
            line-height: 1.6;
            background: #f7f7f9;
        }
        h1 {
            font-size: 1.6rem;
            margin-bottom: 0.5rem;
        }
        .card {
            background: #fff;
            border-radius: 10px;
            padding: 16px 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
        }
        label {
            font-weight: 600;
            display: block;
            margin-bottom: 4px;
        }
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 8px 10px;
            border-radius: 6px;
            border: 1px solid #d0d0d5;
            box-sizing: border-box;
            font-size: 0.95rem;
        }
        .row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 8px;
        }
        button {
            padding: 8px 14px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            background: #2563eb;
            color: #fff;
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .note {
            font-size: 0.8rem;
            color: #666;
            margin-top: 6px;
        }
        .error {
            color: #b91c1c;
            font-size: 0.85rem;
            margin-top: 4px;
        }
        .checkbox-row {
            margin-top: 8px;
            font-size: 0.85rem;
        }
        .checkbox-row input {
            margin-right: 4px;
        }
        code {
            background: #eceef1;
            padding: 2px 4px;
            border-radius: 4px;
            font-size: 0.85rem;
        }
    </style>
</head>
<body>
<h1>Base10 ↔ Base62 Converter</h1>
<p class="note">
    Charset: <code>0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code><br/>
    Optionally pads Base62 to 4 chars like your Python <code>int_to_base62</code>.
</p>

<div class="card">
    <label for="base10-input">Base10 (decimal integer)</label>
    <input id="base10-input" type="number" min="0" step="1" placeholder="e.g. 1, 62, 3844, 14776335" />
    <div class="checkbox-row">
        <label>
            <input type="checkbox" id="pad4" checked />
            Pad Base62 to at least 4 characters (like <code>zfill(4)</code>)
        </label>
    </div>
    <div class="row">
        <button id="btn-10-to-62">Convert → Base62</button>
    </div>
    <div id="error-10" class="error"></div>
</div>

<div class="card">
    <label for="base62-input">Base62 string</label>
    <input id="base62-input" type="text" placeholder="e.g. 0001, 0010, 1000, 100000" />
    <div class="row">
        <button id="btn-62-to-10">Convert → Base10</button>
    </div>
    <div id="error-62" class="error"></div>
</div>

<div class="card">
    <label>Result</label>
    <input id="result" type="text" readonly placeholder="Result will appear here" />
</div>

<script>
    const BASE62_CHARSET = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";

    function intToBase62(num, padTo4 = true) {
        if (num === 0) {
            // 你的 Python 方案里通常是 >=1，这里为了方便也支持 0
            const base = "0";
            return padTo4 ? base.padStart(4, "0") : base;
        }
        if (num < 0 || !Number.isInteger(num)) {
            throw new Error("Number must be a non-negative integer.");
        }

        let n = num;
        const result = [];
        while (n > 0) {
            const remainder = n % 62;
            result.push(BASE62_CHARSET[remainder]);
            n = Math.floor(n / 62);
        }
        let base62Str = result.reverse().join("");

        if (padTo4 && base62Str.length < 4) {
            base62Str = base62Str.padStart(4, "0");
        }

        return base62Str;
    }

    function base62ToInt(str) {
        if (!str || typeof str !== "string") {
            throw new Error("Base62 string is required.");
        }
        let result = 0;
        for (const ch of str) {
            const index = BASE62_CHARSET.indexOf(ch);
            if (index === -1) {
                throw new Error(
                    `Invalid character '${ch}'. Allowed: 0-9, a-z, A-Z.`
                );
            }
            result = result * 62 + index;
        }
        return result;
    }

    const base10Input = document.getElementById("base10-input");
    const base62Input = document.getElementById("base62-input");
    const resultInput = document.getElementById("result");
    const error10 = document.getElementById("error-10");
    const error62 = document.getElementById("error-62");
    const btn10to62 = document.getElementById("btn-10-to-62");
    const btn62to10 = document.getElementById("btn-62-to-10");
    const pad4Checkbox = document.getElementById("pad4");

    btn10to62.addEventListener("click", () => {
        error10.textContent = "";
        error62.textContent = "";
        resultInput.value = "";

        const val = base10Input.value.trim();
        if (val === "") {
            error10.textContent = "Please enter a decimal integer.";
            return;
        }

        const num = Number(val);
        if (!Number.isFinite(num) || !Number.isInteger(num) || num < 0) {
            error10.textContent = "Number must be a non-negative integer.";
            return;
        }

        try {
            const padTo4 = pad4Checkbox.checked;
            const base62 = intToBase62(num, padTo4);
            resultInput.value = base62;
        } catch (e) {
            error10.textContent = e.message || String(e);
        }
    });

    btn62to10.addEventListener("click", () => {
        error10.textContent = "";
        error62.textContent = "";
        resultInput.value = "";

        const str = base62Input.value.trim();
        if (str === "") {
            error62.textContent = "Please enter a Base62 string.";
            return;
        }

        try {
            const num = base62ToInt(str);
            resultInput.value = String(num);
        } catch (e) {
            error62.textContent = e.message || String(e);
        }
    });

    // 回车快捷键：在各自输入框里按 Enter 就触发转换
    base10Input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
            btn10to62.click();
        }
    });

    base62Input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
            btn62to10.click();
        }
    });
</script>
</body>
</html>
